<ion-header class="ion-no-border">
  <ion-toolbar color="primary">
    <ion-title mode="ios">Mes Clients</ion-title>
  </ion-toolbar>
  <ion-toolbar color="primary">
    <ion-searchbar 
      placeholder="Rechercher..." 
      mode="ios" 
      class="custom-searchbar"
      [(ngModel)]="searchTerm"
      [debounce]="300">
    </ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="page-content">
  <div class="header-bg"></div>

  <div class="list-container">
  
    <ion-list *ngIf="filteredMeasurements.length > 0" lines="none" class="bg-transparent">
      
      <ion-item-sliding *ngFor="let m of filteredMeasurements" class="client-card-sliding">
        <ion-item button (click)="goToDetails(m)" class="client-card" detail="false">
          <div class="avatar-circle" [class.female]="m.userProfile?.gender === 'female'">
            <ion-icon [name]="m.userProfile?.gender === 'female' ? 'woman-outline' : 'man-outline'"></ion-icon>
          </div>
          
          <ion-label>
            <div class="label-header">
              <h2>{{ m.userProfile?.name || 'Client #' + m.id.substring(0,6) }}</h2>
              <span class="date">{{ m.date | date:'dd MMM' }}</span>
            </div>
            <div class="meta-tags">
              <span class="tag height">{{ m.userProfile?.height }}m</span>
              <span class="tag gender" [class.female]="m.userProfile?.gender === 'female'">
                {{ m.userProfile?.gender === 'female' ? 'Femme' : 'Homme' }}
              </span>
              <span class="tag phone" *ngIf="m.userProfile?.phone">{{ m.userProfile?.phone }}</span>
            </div>
          </ion-label>
          
          <div slot="end" class="action-arrow">
             <ion-icon name="chevron-forward"></ion-icon>
          </div>
        </ion-item>

        <ion-item-options side="end">
          <ion-item-option color="danger" (click)="delete(m.id)" class="delete-btn">
            <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
            <span>Supprimer</span>
          </ion-item-option>
        </ion-item-options>
      </ion-item-sliding>

    </ion-list>

    <div class="empty-state" *ngIf="filteredMeasurements.length === 0">
      <div class="empty-icon shadow">
        <ion-icon name="people-outline"></ion-icon>
      </div>
      <h3>{{ searchTerm ? 'Aucun résultat' : 'Aucun client' }}</h3>
      <p>{{ searchTerm ? 'Essayez une autre recherche' : 'Vos mesures enregistrées apparaîtront ici.' }}</p>
    </div>

  </div>

</ion-content>
